<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Climacode - Dados em Tempo Real</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: linear-gradient(180deg, #1e3a8a, #0f172a);
      color: white;
      text-align: center;
      padding: 40px;
    }
    .card {
      background: rgba(255, 255, 255, 0.1);
      padding: 20px;
      border-radius: 12px;
      max-width: 400px;
      margin: 20px auto;
      backdrop-filter: blur(8px);
    }
    h1 { color: #60a5fa; }
    .valor { font-size: 2rem; margin: 10px 0; }
    .hora { color: #93c5fd; font-size: 0.9rem; }
  </style>
</head>
<body>
  <section>
    <img 
      src="https://i.postimg.cc/Jhj3w0GD/Sem-titulo.jpg"
      alt="Logo ClimaCode"
      style="max-width:200px; border-radius:10px; margin-bottom:20px;">
  </section>

  <h1>üå¶Ô∏è CLIMACODE_OFICIAL</h1>
  <div class="card">
    <h2>Temperatura_BMP280</h2>
    <p class="valor" id="temp">-- ¬∞C</p>
    <h2>Temperatura_DHT22</h2>
    <p class="valor" id="temp2">-- ¬∫c</p>
    <h2>Umidade</h2>
    <p class="valor" id="hum">-- %</p>
    <h2>Press√£o</h2>
    <p class="valor" id="press">-- hPa</p>
    
    <!-- NOVO BLOCO: previs√£o calculada -->
    <h2>Previs√£o do Tempo</h2>
    <p class="valor" id="prevtempo">--</p>

    <p class="hora" id="hora">√öltima atualiza√ß√£o: --</p>
  </div>

  <script>
    const channelID = "3122719"; // ID do canal no ThingSpeak
    const url = `https://api.thingspeak.com/channels/${channelID}/feeds/last.json`;

    async function atualizarDados() {
      try {
        const res = await fetch(url);
        const data = await res.json();

        const temperatura = parseFloat(data.field1);
        const temperatura2 = parseFloat(data.field2);
        const umidade = parseFloat(data.field3);
        const horaAtual = new Date(data.created_at).toLocaleString("pt-BR");
        const pressao = parseFloat(data.field4);
        
        document.getElementById("temp").textContent = `${temperatura.toFixed(2)} ¬∞C`;
        document.getElementById("temp2").textContent = `${temperatura2.toFixed(2)} ¬∫c`;
        document.getElementById("hum").textContent = `${umidade.toFixed(2)} %`;
        document.getElementById("hora").textContent = `√öltima atualiza√ß√£o: ${horaAtual}`;
        document.getElementById("press").textContent = `${pressao.toFixed(2)} hPa`;
        
        // üîÆ Fun√ß√£o de previs√£o autom√°tica
        const previsaoTexto = calcularPrevisao(umidade, pressao);
        document.getElementById("prevtempo").textContent = previsaoTexto;

      } catch (error) {
        console.error("Erro ao buscar dados:", error);
      }
    }

    // üå¶Ô∏è Fun√ß√£o que calcula previs√£o com base na umidade e press√£o
    function calcularPrevisao(umidade, pressao) {
      if (isNaN(umidade) || isNaN(pressao)) return "--";

      if (pressao < 1000 && umidade > 80) {
        return "üåßÔ∏è Alta chance de chuva (90 porcento de chances)";
      } else if (pressao < 1010 && umidade > 70) {
        return "‚òÅÔ∏è Tempo nublado, possibilidade de garoa";
      } else if (pressao > 1020 && umidade < 60) {
        return "‚òÄÔ∏è Tempo ensolarado e seco";
      } else if (pressao >= 1010 && pressao <= 1020 && umidade >= 50 && umidade <= 70) {
        return "üå§Ô∏è Tempo est√°vel com poucas nuvens";
      } else {
        return "‚õÖ Parcialmente Nublado";
      }
    }

    // Atualiza a cada 15 segundos
    setInterval(atualizarDados, 15000);
    atualizarDados();
  </script>

  <br>
  <section>
    <h3> OS DADOS SER√ÉO ATUALIZADO EM SEGUNDOS AGUARDE... </h3>
  </section>
  <br>
  <footer>
    <p>&copy progamador:@carlosdedeus_art_1.0</p>
  </footer>
  <br>
  <footer>
    <p>‚óè<a href="https://www.instagram.com/carlosdedeus_art_1.0?igsh=MWQya25zaWFzbDR5eg=="target="_blank">VER</a></p>
    <style>
     body {
      color:yelow;
     }
     </style>
  </footer>
  
  
  
</body>
</html>